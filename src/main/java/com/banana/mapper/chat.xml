<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.chat">

	<insert id="InsertChat" parameterType="com.banana.vo.ChatVO">
		insert into banana_chat values ('C_'||sqe_banana_chat.nextval,#{sell_mid},#{buy_mid},#{pid},#{chat_content},sysdate,#{chk_read})
	</insert>
	
	<select id="ChatList" resultType="com.banana.vo.ChatVO">
		select cid, sell_mid, buy_mid, pid, chat_content, to_char(cdate,'mm.dd  hh:mm') cdate, chk_read
			from banana_chat  
			order by cdate desc
	</select>
	
	<select id="ChatContent"  parameterType="java.lang.String"  resultType="com.banana.vo.ChatVO" >
		select c.cid, c.sell_mid , c.buy_mid, p.pid, c.chat_content, c.cdate, c.chk_read, p.mid, p.ptitle, p.pprice
			from banana_chat c, banana_product p
				where p.pid = c.pid and p.mid =c.sell_mid and c.cid=#{cid}
	</select>
	
</mapper>