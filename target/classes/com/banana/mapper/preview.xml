<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.preview">
	
	<select id="buyreviewinsert" parameterType="com.banana.vo.ReviewVO">
		insert into banana_buy_review values
		<choose>
  			<when test="rfile != null">
  				('BR_'||sqe_banana_buy_review.nextval,#{pid},#{mid},#{score},#{review},#{rfile},#{rsfile},sysdate)
  			</when>
  			<otherwise>
  				('BR_'||sqe_banana_buy_review.nextval,#{pid},#{mid},#{score},#{review},'','',sysdate)
  			</otherwise>
  		</choose>
	</select>
	
	<select id="sellreviewinsert" parameterType="com.banana.vo.ReviewVO">
		insert into banana_sell_review values
		<choose>
  			<when test="rfile != null">
  				('SR_'||sqe_banana_sell_review.nextval,#{pid},#{mid},#{score},#{review},#{rfile},#{rsfile},sysdate)
  			</when>
  			<otherwise>
  				('SR_'||sqe_banana_sell_review.nextval,#{pid},#{mid},#{score},#{review},'','',sysdate)
  			</otherwise>
  		</choose>
	</select>
</mapper>